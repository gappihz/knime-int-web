<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive KNIME Training Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .nav-item {
            transition: all 0.2s ease-in-out;
        }
        .nav-item.active {
            background-color: #EAE3D9;
            color: #A2886A;
            border-left: 4px solid #A2886A;
        }
        .nav-item:hover:not(.active) {
            background-color: #F5F1EB;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .prose-custom h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #333;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid #EAE3D9;
        }
         .prose-custom ul, .prose-custom ol {
            padding-left: 1.25rem;
            margin-top: 0.5rem;
        }
        .prose-custom li {
            margin-bottom: 0.5rem;
        }
        /* Adjusted code style to ensure bolding works inside */
        .prose-custom code {
            background-color: #EAE3D9;
            color: #A2886A;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-block; /* Helps with padding and margin inside list items */
            white-space: nowrap; /* Prevents wrapping within code blocks */
        }
        /* Specific style for bold elements within code blocks */
        .prose-custom code.highlight {
            font-weight: bold;
            color: #7B5F4A; /* Slightly different color to emphasize, optional */
        }
        .mobile-nav {
            background-color: #FDFBF8;
            border-color: #EAE3D9;
        }
    </style>
</head>
<body class="antialiased">

    <div class="min-h-screen lg:flex">
        <aside class="hidden lg:block lg:w-1/4 xl:w-1/5 bg-[#F5F1EB] p-6 border-r border-[#EAE3D9]">
            <h1 class="text-xl font-bold text-[#A2886A] mb-2">KNIME Training Plan</h1>
            <p class="text-sm text-gray-600 mb-6"><strong>Prepared by ü§ì: <a href="https://www.linkedin.com/in/hertzgappi/" target="_blank" rel="noopener noreferrer" class="text-[#A2886A] hover:underline">Hertz Gappi</a></p>
            </strong>
              <nav id="desktop-nav" class="space-y-2">
            </nav>
        </aside>

        <main class="w-full lg:w-3/4 xl:w-4/5 p-6 sm:p-8 md:p-12">
            
            <div class="lg:hidden mb-6">
                <h1 class="text-2xl font-bold text-[#A2886A] mb-2 text-center">KNIME Training Plan</h1>
                <p class="text-sm text-gray-600 mb-4 text-center">Prepared by ü§ì: <a href="https://www.linkedin.com/in/hertzgappi/" target="_blank" rel="noopener noreferrer" class="text-[#A2886A] hover:underline">Hertz Gappi</a></p>
                <div class="relative">
                    <select id="mobile-nav" class="w-full p-3 border-2 mobile-nav rounded-lg appearance-none text-center font-semibold text-gray-700 focus:outline-none focus:border-[#A2886A]">
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                    </div>
                </div>
            </div>

            <div id="content-container">
            </div>

        </main>
    </div>

    <script>
        const exercises = [
            {
                id: 'ex1',
                title: '1. Monthly Bank Reconciliation',
                emoji: 'üïµÔ∏è‚Äç‚ôÄÔ∏è',
                scenario: `As "BalanceGuard Solutions," your client is struggling with misstated cashbooks‚Äîsome transactions may be overstated, others understated, and no one‚Äôs quite sure which. Thankfully, you have a reliable single source of truth: the bank statements. Your mission is to automate the reconciliation process across multiple months. Build a KNIME workflow that compares bank statements against cashbooks, instantly flagging unmatched transactions and potential discrepancies. Say goodbye to manual guesswork‚Äîlet your workflow lead the way to clarity.`,
                objective: 'To automate the monthly bank reconciliation process by dynamically reading and joining multiple files based on variable file paths and filtering criteria.',
                nodes: [
                                'File Handling & Iteration: <code>List Files/Folders</code>, <code>Path to String</code>, <code>Row Splitter</code>, <code>Table Row to Variable Loop Start</code>',
                                'Data Reading: <code>CSV Reader</code> (configured with flow variables and custom delimiters: <code>;</code> for bank, <code>||</code> for cashbook)',
                                'Data Cleaning: <code>String Manipulation</code>, <code>String to Number</code>, <code>Missing Value</code>',
                                'Data Transformation & Joining: <code>GroupBy</code>, <code>Joiner</code>',
                                'Computation and Checks: <code>Math Formula</code>, <code>Rule Engine</code>, <code>Row Filter</code>',
                                'Date Tagging: <code>String to Date&Time</code>, <code>Date&Time Part Extractor</code>',
                                'Loop Control: <code>Loop End</code>',
                                'Output: <code>Excel Writer</code> (optional, for summary and unmatched transactions)'
                            ],
                logic: [
                                '<b>List Files & Separate:</b> Use <code>List Files/Folders</code> to gather all input files, then convert paths to string. Use <code>Row Splitter</code> with wildcards (e.g., <code>*bank*</code>, <code>*cashbook*</code>) to separate bank and cashbook files.',
                                '<b>Table Row to Variable Loop Start:</b> Loop through each file using <code>Table Row to Variable Loop Start</code>. Inside the loop, use <code>CSV Reader</code> to read files. Set delimiter to <code>;</code> for bank and <code>||</code> for cashbook.',
                                '<b>Clean Bank Value Column:</b> Use <code>String Manipulation</code> to remove currency symbols in <code>ValuE</code> using: <code>replaceChars($ValuE$, "$", "")</code>. Then convert it to numeric using <code>String to Number</code>.',
                                '<b>Normalize Transaction ID:</b> Use <code>String Manipulation</code> to keep only numeric parts of IDs for matching. Bank: <code>regexReplace($Transaction Identifier$, "[^0-9]", "")</code>. Cashbook: <code>regexReplace($Trans_ID$, "[^0-9]", "")</code>.',
                                '<b>Group Transactions:</b> Use <code>GroupBy</code> to consolidate duplicate or split entries. Group by all string fields, and sum relevant numeric columns via manual aggregation.',
                                '<b>Joiner:</b> Use <code>Joiner</code> to match transactions based on numeric ID. Enable matching and left-unmatched rows. Keep all cashbook columns and only <code>ValuE</code> from bank.',
                                '<b>Math Formula:</b> Create a discrepancy check using <code>$ValuE$ - $Amount Local$</code> to identify misstatements.',
                                '<b>Convert & Extract Date Parts:</b> Use <code>String to Date&Time</code> to convert <code>TransactionDate</code>. Then use <code>Date&Time Part Extractor</code> to extract <code>Month</code> and <code>Year</code>.',
                                '<b>Monthly Adjustment Summary:</b> Use <code>GroupBy</code> to summarize total discrepancies per month. Group by <code>Month</code> and <code>Year</code>, and aggregate the difference using <code>Sum</code>.',
                                '<b>Filter Misstated Transactions:</b> Use <code>Row Filter</code> to isolate transactions where the discrepancy is not equal to zero.',
                                '<b>Excel Writer (Optional):</b> Export both summary and mismatch reports using <code>Excel Writer</code>. Use flow variables if needed to consolidate into one file.'
                            ]
            },
            {
                id: 'ex2',
                title: '2. AR Aging Analysis',
                emoji: 'üëµ',
                scenario: `As "Apex Accounting," you need to get a handle on your growing bad debt problem. Manual journal entries for overdue Accounts Receivable are slow and error-prone. Your goal: design a KNIME workflow that automatically generates an AR aging report, categorizing outstanding balances into aging buckets (0-30, 31-60, 61-90, 90+, Not Yet Due) based on "Days Outstanding." Become the dynamic dynamo that cleans up the balance sheet!`,
                objective: 'To automate the creation of an AR aging report by calculating "Days Outstanding" and categorizing balances into aging buckets, filtering to show only clients with outstanding amounts.',
                nodes: [
                    '<code>CSV Reader</code>',
                    '<code>String to Date&Time</code>',
                    '<code>Date&Time Shift</code>',
                    '<code>Create Date&Time Range</code>',
                    '<code>Cross Joiner</code>',
                    '<code>Date&Time Difference</code>',
                    '<code>Rule Engine</code>',
                    '<code>Pivot</code>',
                    '<code>Column Filter</code>',
                    '<code>Column Resorter</code>',
                    '<code>Missing Value</code>',
                    '<code>Rule-based Row Filter</code>',
                    '<code>Excel Writer</code> (Optional, for output)'
                ],
                logic: [
                    '<b>Load Data using <code>CSV Reader</code>:</b> Drag the <code>CSV Reader</code> node. Configure it to read your source CSV file with the <b>delimiter</b> set to <code class="highlight">--</code> (double dash).',
                    '<b>Convert Invoice Date to Date&Time Format using <code>String to Date&Time</code>:</b> Connect the <code>CSV Reader</code>. Select your "Invoice Date Text" column, set the correct <b>Date Format</b> (e.g., "yyyy-MM-dd"), and set the <b>New Type</b> to <code>Date and Time</code>.',
                    '<b>Calculate Due Date using <code>Date&Time Shift</code>:</b> Connect after <code>String to Date&Time</code>. Select the "Invoice Date Text" column, set <b>Shift Type</b> to <code>Days</code>, <b>Shift Value</b> to <code>30</code>, and append a new column named "Due Date".',
                    '<b>Create Today\'s Date using <code>Create Date&Time Range</code>:</b> Drag this node separately. Set <b>Mode Selection</b> to <code>Fixed One</code>, check <code>Use execution date for starting point</code> and <code>Use execution date for ending point</code>.',
                    '<b>Combine Data and Today\'s Date using <code>Cross Joiner</code>:</b> Connect the output of <code>Date&Time Shift</code> to the upper input and the output of <code>Create Date&Time Range</code> to the lower input. Use default configuration.',
                    '<b>Calculate Days Outstanding using <code>Date&Time Difference</code>:</b> Connect after <code>Cross Joiner</code>. Set <b>Base Column</b> to "Today", <b>Calculate difference to</b> "Due Date", <b>Granularity</b> to <code>Days</code>, and name the new column "Days Outstanding". <b>Important:</b> In this setup, negative values mean "overdue".',
                    '<b>Create Aging Buckets using <code>Rule Engine</code>:</b> Connect after <code>Date&Time Difference</code>. Use the following rules based on "Days Outstanding" to create categories:',
                    '<ul><li><code>$Days Outstanding$ < -90 => "90+"</code></li><li><code>$Days Outstanding$ < -60 AND $Days Outstanding$ >= -90 => "61-90"</code></li><li><code>$Days Outstanding$ < -30 AND $Days Outstanding$ >= -60 => "31-60"</code></li><li><code>$Days Outstanding$ < 0 AND $Days Outstanding$ >= -30 => "0-30"</code></li><li><code>TRUE => "NOT YET DUE"</code></li></ul>',
                    '<b>Aggregate Amounts by Aging Bucket using <code>Pivot</code>:</b> Connect after <code>Rule Engine</code>. Set "Client Name" (and "Invoice Number" if desired) as <b>Groups</b>, the Rule Engine output column (e.g., "Prediction") as <b>Pivots</b>. For <b>Manual Aggregation</b>, select "Amount Due" and set <b>Aggregation Method</b> to <code>Sum</code>. In Advanced Settings, set "Column name remains" to <code>Pivot name (aggregation name)</code>.',
                    '<b>Rearrange Columns using <code>Column Resorter</code>:</b> Connect after <code>Pivot</code>. Order columns as: Client Name, 0-30, 31-60, 61-90, 90+, NOT YET DUE.',
                    '<b>Handle Missing Values using <code>Missing Value</code>:</b> Connect after <code>Column Resorter</code>. For all numeric (aging bucket) columns, set <b>Default Method (Numbers)</b> to <code>Fixed value</code> and the value to <code>0</code>.',
                    '<b>Filter Clients with No Outstanding Balances using <code>Rule-based Row Filter</code>:</b> Connect after <code>Missing Value</code>. Add the rule: <code>$"0-30"$ == 0 AND $"31-60"$ == 0 AND $"61-90"$ == 0 AND $"90+"$ == 0 => FALSE<br>TRUE => TRUE</code>. This excludes rows where all outstanding buckets are zero.',
                    '<b>Export Results using <code>Excel Writer</code> (Optional):</b> Connect the final output to this node to save your AR Aging Report to an Excel file.'
                ]
            },
            {
                id: 'ex3',
                title: '3. Asset Depreciation Forecast',
                emoji: '‚è≥',
                scenario: `You're the asset manager for "Prime Logistics." Forecasting depreciation for each of their hundreds of assets, each with a different useful life, is a budgeting nightmare. You need a workflow that calculates monthly depreciation for every asset until its exact end-of-life, then stops. No more over-depreciating or under-depreciating!`,
                objective: `To simulate and calculate asset depreciation over its useful life using a recursive loop, dynamically stopping the calculation when the asset's useful life is complete.`,
                nodes: [
                    'Loop Control: <code>Table Row to Variable Loop Start</code>',
                    '<code>Recursive Loop Start</code>',
                    '<code>Variable Condition Loop End</code>',
                    'Date & Time Manipulation: <code>Date&Time Difference</code>',
                    '<code>Date&Time Shift</code>',
                    'Calculation: <code>Java Snippet</code> (or <code>Math Formula</code> for simpler methods)',
                    '<code>Column Expressions</code>',
                    'Data Aggregation: <code>Concatenate</code>',
                    'Variable Manipulation: <code>Variable Expressions</code>'
                ],
                logic: [
                    '<b>Table Row to Variable Loop Start:</b> Iterate through each asset, passing its details (Cost, Useful Life, Start Date, Depreciation Method) as flow variables to the recursive loop.',
                    '<b>Recursive Loop Start:</b> Initialize the loop. The initial iteration will take the asset\'s starting data. Subsequent iterations will take the output of the previous iteration.',
                    '<b>Date&Time Shift:</b> Inside the loop, increment the current month by one using <code>Date&Time Shift</code> to simulate time progression.',
                    '<b>Date&Time Difference:</b> Calculate the difference in months between the asset\'s start date and the current month in the loop.',
                    '<b>Java Snippet (or Math Formula):</b> Calculate the monthly depreciation based on the selected depreciation method (e.g., Straight-Line: Cost / Useful Life).',
                    '<b>Variable Condition Loop End:</b> This is crucial. Use a <code>Variable Condition Loop End</code> node to check if the current month has exceeded the asset\'s "Useful Life (Months)". The loop terminates for that specific asset when the condition is met.',
                    '<b>Concatenate:</b> Collect the monthly depreciation records for each asset from the recursive loop.',
                    '<b>Loop End (Outer Loop):</b> Combine the results from all assets.'
                ]
            },
            {
                id: 'ex4',
                title: '4. Trade Signal Filtering',
                emoji: 'üö¶',
                comingSoonDate: 'August 1' // Added coming soon date
            },
            {
                id: 'ex5',
                title: '5. Financial Report Consolidation',
                emoji: 'ü§ù',
                comingSoonDate: 'August 8' // Added coming soon date
            },
            {
                id: 'ex6',
                title: '6. FX Rate Application',
                emoji: 'üåç',
                comingSoonDate: 'August 15' // Added coming soon date
            },
            {
                id: 'ex7',
                title: '7. Sliding Forecast Window',
                emoji: 'üìà',
                comingSoonDate: 'August 22' // Added coming soon date
            },
            {
                id: 'ex8',
                title: '8. Trade Sequence Blocking',
                emoji: '‚úÖ',
                comingSoonDate: 'August 29' // Added coming soon date
            },
        ];

        const desktopNav = document.getElementById('desktop-nav');
        const mobileNav = document.getElementById('mobile-nav');
        const contentContainer = document.getElementById('content-container');

        exercises.forEach((ex, index) => {
            const navLink = document.createElement('a');
            navLink.href = '#';
            navLink.dataset.target = ex.id;
            navLink.className = `nav-item block p-3 rounded-lg font-semibold text-gray-700 ${index === 0 ? 'active' : ''}`;
            
            // Display "Coming Soon" in the navigation for exercises 4-8
            if (ex.comingSoonDate) {
                navLink.innerHTML = `<span class="mr-2">${ex.emoji}</span> ${ex.title}: Coming Soon ${ex.comingSoonDate}`;
            } else {
                navLink.innerHTML = `<span class="mr-2">${ex.emoji}</span> ${ex.title}`;
            }
            desktopNav.appendChild(navLink);

            const navOption = document.createElement('option');
            navOption.value = ex.id;
            // Display "Coming Soon" in the dropdown for exercises 4-8
            if (ex.comingSoonDate) {
                navOption.textContent = `${ex.emoji} ${ex.title}: Coming Soon ${ex.comingSoonDate}`;
            } else {
                navOption.textContent = `${ex.emoji} ${ex.title}`;
            }
            if (index === 0) navOption.selected = true;
            mobileNav.appendChild(navOption);

            const contentDiv = document.createElement('div');
            contentDiv.id = ex.id;
            contentDiv.className = `content-section prose-custom max-w-none ${index === 0 ? 'active' : ''}`;
            
            // Conditional rendering for "Coming Soon" exercises
            if (ex.comingSoonDate) {
                contentDiv.innerHTML = `
                    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-gray-100 text-center">
                        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4">${ex.emoji} ${ex.title}</h2>
                        <p class="text-xl text-gray-600 mb-4"><strong>Coming Soon ${ex.comingSoonDate}!</strong></p>
                        <p class="text-gray-500">Stay tuned for this exciting new exercise.</p>
                    </div>
                `;
            } else {
                const nodesList = ex.nodes.map(node => `<li>${node}</li>`).join('');
                const logicList = ex.logic.map(step => `<li>${step}</li>`).join('');

                contentDiv.innerHTML = `
                    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-gray-100">
                        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">${ex.emoji} ${ex.title}</h2>
                        <p class="text-gray-600 mb-6">${ex.scenario}</p>
                        
                        <div class="bg-[#F5F1EB] p-4 rounded-lg mb-6">
                            <h3 class="!mt-0 !border-none text-[#A2886A]">üéØ Technical Objective</h3>
                            <p class="text-gray-700">${ex.objective}</p>
                        </div>

                        <h3>üõ†Ô∏è KNIME Nodes to Use</h3>
                        <ul class="list-disc list-inside text-gray-700 space-y-1">
                            ${nodesList}
                        </ul>

                        <h3>üìù Step-by-Step Logic</h3>
                        <ol class="list-decimal list-inside text-gray-700 space-y-2">
                            ${logicList}
                        </ol>
                    </div>
                `;
            }
            contentContainer.appendChild(contentDiv);
        });

        function switchTab(targetId) {
            document.querySelectorAll('#desktop-nav .nav-item').forEach(item => {
                item.classList.toggle('active', item.dataset.target === targetId);
            });

            mobileNav.value = targetId;

            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.toggle('active', section.id === targetId);
            });
            window.scrollTo(0, 0);
        }

        desktopNav.addEventListener('click', (e) => {
            e.preventDefault();
            const target = e.target.closest('.nav-item');
            if (target) {
                switchTab(target.dataset.target);
            }
        });

        mobileNav.addEventListener('change', (e) => {
            switchTab(e.target.value);
        });

    </script>
</body>
</html>